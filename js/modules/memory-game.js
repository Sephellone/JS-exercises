const TRANSITION_TIME=300,CARDS_TO_RENDER=24,MAX_CARDS=26,CARDS_DATA=[{value:1,url:""},{value:2,url:""},{value:3,url:""},{value:4,url:""},{value:5,url:""},{value:6,url:""},{value:9,url:""},{value:10,url:""},{value:11,url:""},{value:12,url:""},{value:13,url:""},{value:14,url:""},{value:15,url:""},{value:16,url:""},{value:17,url:""},{value:18,url:""},{value:19,url:""},{value:20,url:""}],shuffleArray=e=>{for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}},openCard=e=>{e.classList.add("rotated"),setTimeout((()=>{e.classList.add("open"),e.classList.remove("rotated")}),300)},closeCard=e=>{e.classList.add("rotated"),setTimeout((()=>{e.classList.remove("open"),e.classList.remove("rotated")}),300)},compareCards=(e,t)=>e.dataset.memory===t.dataset.memory,initMemoryGame=()=>{const e=document.querySelector('[data-memory="parent"]');if(!e)return;const t=e.querySelector('[data-memory="field"]'),a=e.querySelector('[data-memory="start"]'),r=e.querySelector('[data-memory="message"]');if(!t||!a||!r)return;let s;t.style.setProperty("--transition","300ms");let l,o,n,u=24,m=!1,d=0;const c={12:"easy",24:"normal",36:"hard",48:"insane"},i={easy:0,normal:0,hard:0,insane:0};let y;const v=()=>{r.querySelector('[data-memory="message-moves"]').textContent=d,r.querySelector('[data-memory="message-best-moves"]').textContent=i[n],r.classList.remove("hidden")},h=e=>{const t=e.target;var a;"field"!==t.dataset.memory&&t.dataset.memory&&!t.classList.contains("open")&&(l&&o||(d++,m?(openCard(t),o=t,a=o,l.dataset.memory===a.dataset.memory?(setTimeout((()=>{[l,o].forEach((e=>{e.classList.add("hidden")})),m=!1,l=null,o=null}),1200),y-=2,0===y&&((0===i[n]||d<i[n])&&(i[n]=d),setTimeout(v,1500))):setTimeout((()=>{[l,o].forEach((e=>{closeCard(e)})),m=!1,l=null,o=null}),1500)):(openCard(t),m=!0,l=t)))};a.addEventListener("click",(()=>{d=0,(()=>{const t=e.querySelector('[name="type"]:checked');s=t.value;const a=e.querySelector('[name="size"]:checked');u=parseInt(a.value),n=c[u]})(),(()=>{const e=[];for(;e.length<u;){const t=Math.floor(26*Math.random()+1);e.includes(t)||(e.push(t),e.push(t))}shuffleArray(e),t.innerHTML="",e.forEach((e=>{const a=document.createElement("div");a.classList.add("memory__card");const r=document.createElement("img");r.setAttribute("src",`img/memory/${s}s/${s}_${e}.webp`),a.append(r),a.setAttribute("data-memory",e),t.append(a)})),y=e.length})(),t.addEventListener("click",h)})),r.querySelector('[data-memory="message-button"]').addEventListener("click",(()=>{t.removeEventListener("click",h),r.classList.add("hidden")}))};export{initMemoryGame};
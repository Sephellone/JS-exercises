const TRANSITION_TIME=300,CARDS_TO_RENDER=24,CARDS_DATA=[{value:1,url:""},{value:2,url:""},{value:3,url:""},{value:4,url:""},{value:5,url:""},{value:6,url:""},{value:9,url:""},{value:10,url:""},{value:11,url:""},{value:12,url:""},{value:13,url:""},{value:14,url:""},{value:15,url:""},{value:16,url:""},{value:17,url:""},{value:18,url:""},{value:19,url:""},{value:20,url:""}],shuffleArray=e=>{for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}},openCard=e=>{e.classList.add("rotated"),setTimeout((()=>{e.classList.add("open"),e.classList.remove("rotated")}),300)},closeCard=e=>{e.classList.add("rotated"),setTimeout((()=>{e.classList.remove("open"),e.classList.remove("rotated")}),300)},compareCards=(e,t)=>e.dataset.memory===t.dataset.memory,initMemoryGame=()=>{const e=document.querySelector('[data-memory="parent"]');if(!e)return;const t=e.querySelector('[data-memory="field"]'),a=e.querySelector('[data-memory="start"]'),r=e.querySelector('[data-memory="message"]');if(!t||!a||!r)return;t.style.setProperty("--transition","300ms");let l,s,o=!1,u=0,d=0,n=24;const m=()=>{r.querySelector('[data-memory="message-moves"]').textContent=u,r.querySelector('[data-memory="message-best-moves"]').textContent=d,r.classList.remove("hidden")},c=e=>{const t=e.target;var a;"field"===t.dataset.memory||t.classList.contains("open")||(l&&s||(u++,o?(openCard(t),s=t,a=s,l.dataset.memory===a.dataset.memory?(setTimeout((()=>{[l,s].forEach((e=>{e.classList.add("hidden")})),o=!1,l=null,s=null}),1200),n-=2,0===n&&((0===d||u<d)&&(d=u),setTimeout(m,1500))):setTimeout((()=>{[l,s].forEach((e=>{closeCard(e)})),o=!1,l=null,s=null}),1500)):(openCard(t),o=!0,l=t)))};a.addEventListener("click",(()=>{u=0,(()=>{const e=[];for(;e.length<24;){const t=Math.floor(Math.random()*CARDS_DATA.length);e.includes(CARDS_DATA[t])||(e.push(CARDS_DATA[t]),e.push(CARDS_DATA[t]))}shuffleArray(e),t.innerHTML="",e.forEach((e=>{const a=document.createElement("div");a.classList.add("memory__card"),a.setAttribute("data-memory",e.value),t.append(a)})),n=e.length})(),t.addEventListener("click",c)})),r.querySelector('[data-memory="message-button"]').addEventListener("click",(()=>{t.removeEventListener("click",c),r.classList.add("hidden")}))};export{initMemoryGame};
const isQ3=(e,t)=>e<=0&&t>=0,getAngle=(e,t)=>{let n=0;return n=isQ3(e,t)?Math.round(180*(2*Math.PI-Math.atan2(t,e))/Math.PI):Math.round(180*-Math.atan2(t,e)/Math.PI),n},isInside=(e,t,n)=>{const o=n.getBoundingClientRect();return e>=o.x&&e<=o.x+o.width&&t>=o.y&&t<=o.y+o.height},initRoundPhone=()=>{const e=document.querySelector('[data-round-phone="parent"]');if(!e)return;const t=e.querySelector('[data-round-phone="input"]'),n=e.querySelector('[data-round-phone="plane"]'),o=e.querySelector('[data-round-phone="round"]'),r=e.querySelector('[data-round-phone="stop"]');if(!(t&&n&&o&&r))return;let d,a,s,u,i,l,c,h,p,g,y,m;const v=e=>{c=e.clientX-s,h=e.clientY-u,g=getAngle(c,h),y=p-g,y<0||(y>323&&(y=323),o.style.setProperty("--angle",`${y}deg`))};o.addEventListener("mousedown",(e=>{if(d=e.target,"round"===d.dataset.roundPhone)return;a=d.dataset.roundPhone;const t=n.getBoundingClientRect();s=t.x+t.width/2,u=t.y+t.height/2,i=e.clientX-s,l=e.clientY-u,p=getAngle(i,l),document.addEventListener("mousemove",v)})),document.addEventListener("mouseup",(e=>{e.target.closest('[data-round-phone="plane"]')&&(isInside(e.clientX,e.clientY,r)&&(t.value+=a),document.removeEventListener("mousemove",v),m=4*y,o.style.setProperty("--time",`${m}ms`),o.classList.add("rotated"),setTimeout((()=>{o.classList.remove("rotated"),o.style.setProperty("--time","0"),o.style.setProperty("--angle","0")}),m))})),e.querySelector(".phones__reset").addEventListener("click",(()=>{t.value=""}))};export{initRoundPhone};